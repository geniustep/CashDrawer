# تعليمات التثبيت والاستخدام

## للمطورين (بناء الملف EXE)

### المتطلبات:
- Windows 10 أو أحدث
- Python 3.8+ مثبت
- اتصال بالإنترنت (لتحميل المكتبات)

### خطوات البناء:

1. **افتح Command Prompt أو PowerShell** في مجلد المشروع

2. **شغّل ملف البناء:**
   ```cmd
   build_final.bat
   ```
   أو في PowerShell:
   ```powershell
   .\build_final.bat
   ```

3. **انتظر اكتمال البناء** (قد يستغرق 2-5 دقائق)

4. **الملف الناتج:**
   - الموقع: `dist\GeniusStepCashDrawerAgent.exe`
   - الحجم: حوالي 30-50 ميجابايت
   - **مستقل تماماً** - لا يحتاج Python أو أي مكتبات

---

## للمستخدمين النهائيين (استخدام الملف EXE)

### المتطلبات:
- Windows 10 أو أحدث
- طابعة ESC/POS متصلة (اختياري - للتحكم في درج النقدية)

### خطوات التثبيت:

1. **انسخ الملف** `GeniusStepCashDrawerAgent.exe` إلى أي مجلد تريده

2. **شغّل الملف** بالنقر المزدوج عليه

3. **افتح المتصفح** على العنوان:
   ```
   http://127.0.0.1:16732
   ```

4. **قم بالإعدادات:**
   - اختر الطابعة من القائمة
   - أدخل `device_id` و `device_token` من نظام GeniusStep
   - اضبط إعدادات درج النقدية إذا لزم الأمر

5. **اختبر فتح درج النقدية** من صفحة الإعدادات

### ملاحظات مهمة:

- ✅ **لا حاجة لتثبيت Python** - الملف يحتوي على كل شيء
- ✅ **لا حاجة لتثبيت مكتبات** - كل شيء مضمن
- ✅ **يعمل مباشرة** - فقط انسخ وشغّل
- ⚠️ قد يطلب Windows السماح للملف بالمرور عبر الجدار الناري (Firewall)
- ⚠️ تأكد من أن المنفذ 16732 غير مستخدم

### الإعدادات:

الإعدادات تُحفظ تلقائياً في:
```
C:\ProgramData\GeniusStep\CashDrawerAgent\config.json
```

يمكنك تعديلها يدوياً أو عبر واجهة الويب.

---

## استكشاف الأخطاء

### الملف لا يعمل:
- تأكد من أن Windows 10 أو أحدث مثبت
- تحقق من أن الجدار الناري يسمح للملف بالعمل
- شغّل الملف من Command Prompt لرؤية الأخطاء

### لا يمكن الاتصال بالخادم:
- تحقق من اتصال الإنترنت
- تأكد من صحة `device_id` و `device_token`
- تحقق من عنوان `wss_url` في الإعدادات

### لا يعمل فتح درج النقدية:
- تأكد من أن الطابعة متصلة ومثبتة
- تحقق من اسم الطابعة في الإعدادات
- جرب تغيير `drawer_pin` (0 أو 1)

---

## التوزيع

يمكنك توزيع ملف `GeniusStepCashDrawerAgent.exe` بحرية:
- نسخه على USB
- رفعه على الإنترنت
- تثبيته على أي عدد من الأجهزة

**لا حاجة لأي ملفات إضافية!**
